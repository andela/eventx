/*! jQuery UI - v1.11.1 - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,r,o;for(o=0;null!=(r=i[o]);o++)try{n=e._data(r,"events"),n&&n.remove&&e(r).triggerHandler("remove")}catch(a){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var r,o,a,s,l={},u=t.split(".")[0];return t=t.split(".")[1],r=u+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},o=e[u][t],a=e[u][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),s=new i,s.options=e.widget.extend({},s.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,r,o=i.call(arguments,1),a=0,s=o.length;s>a;a++)for(n in o[a])r=o[a][n],o[a].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=i.call(arguments,1),l=this;return o=!a&&s.length?e.widget.extend.apply(null,[o].concat(s)):o,a?this.each(function(){var i,n=e.data(this,r);return"instance"===o?(l=n,!1):n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,s),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new n(o,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},n=t.split("."),t=n.shift(),n.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)r[n[o]]=r[n[o]]||{},r=r[n[o]];if(t=n.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var r,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,d=l[2];d?r.delegate(d,u,s):i.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,o,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),a&&e.effects&&e.effects.effect[s]?n[t](r):s!==t&&n[s]?n[s](r.duration,r.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}});e.widget}),/*
 * jQuery Iframe Transport Plugin 1.8.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,r,o,a=i.initialIframeSrc||"javascript:false;";return{send:function(s,l){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),o=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+o+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+o+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+o+"_method=PATCH",i.type="POST"),t+=1,r=e('<iframe src="'+a+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(i.paramName)?i.paramName:[i.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",r.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",o[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var r=e(t[i]);e(n).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(n)})}),n.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",a),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.42.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var r=n.dataTransfer;r&&-1!==e.inArray("Files",r.types)&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(r.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,r=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=r,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,r=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:a,value:t.blob}):e.each(t.files,function(n,r){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||a,value:r})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(a,t.blob,r.name):e.each(t.files,function(r,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append("array"===e.type(t.paramName)&&t.paramName[r]||a,o,o.uploadName||o.name)})),t.data=i):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)n.push(i),r-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var r=e.Deferred(),o=r.promise();return i=i||this.options.context||o,t===!0?r.resolveWith(i,n):t===!1&&r.rejectWith(i,n),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var n=this,r=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,o){return(t||o)&&(i._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():r(arguments)}).pipe(t,o)),this._processQueue||r([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,r,o=this,a=t.files[0],s=a.size,l=t.uploadedBytes,u=t.maxChunkSize||s,d=this._blobSlice,p=e.Deferred(),c=p.promise();return this._isXHRUpload(t)&&d&&(l||s>u)&&!t.data?i?!0:l>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(r=function(){var i=e.extend({},t),c=i._progress.loaded;i.blob=d.call(a,l,l+u,a.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+s,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,a,u){l=o._getUploadedBytes(u)||l+i.chunkSize,c+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=a,i.jqXHR=u,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),s>l?r():p.resolveWith(i.context,[n,a,u])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),p.rejectWith(i.context,[e,t,n])})},this._enhancePromise(c),c.abort=function(){return n.abort()},r(),c):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=t,a.textStatus=r.textStatus=i,a.jqXHR=r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(e,t,i,n){var r=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),r.jqXHR=n.jqXHR=e,r.textStatus=n.textStatus=t,r.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,r,o,a,s=this,l=s._getAJAXSettings(i),u=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,n=n||((r||s._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&s._getXHRPromise(!1,l.context,r)||s._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){s._onDone(e,t,i,l)}).fail(function(e,t,i){s._onFail(e,t,i,l)}).always(function(e,t,i){if(s._onAlways(e,t,i,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var n=s._slots.shift();n;){if("pending"===s._getDeferredState(n)){n.resolve();break}n=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.pipe(u)):(this._sequence=this._sequence.pipe(u,u),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(l.context,r),u())},this._enhancePromise(a)):u()},_onAdd:function(t,i){var n,r,o,a,s=this,l=!0,u=e.extend({},this.options,i),d=i.files,p=d.length,c=u.limitMultiFileUploads,f=u.limitMultiFileUploadSize,h=u.limitMultiFileUploadSizeOverhead,g=0,m=this._getParamName(u),_=0;if(!f||p&&void 0!==d[0].size||(f=void 0),(u.singleFileUploads||c||f)&&this._isXHRUpload(u))if(u.singleFileUploads||f||!c)if(!u.singleFileUploads&&f)for(o=[],n=[],a=0;p>a;a+=1)g+=d[a].size+h,(a+1===p||g+d[a+1].size+h>f||c&&a+1-_>=c)&&(o.push(d.slice(_,a+1)),r=m.slice(_,a+1),r.length||(r=m),n.push(r),_=a+1,g=0);else n=m;else for(o=[],n=[],a=0;p>a;a+=c)o.push(d.slice(a,a+c)),r=m.slice(a,a+c),r.length||(r=m),n.push(r);else o=[d],n=[m];return i.originalFiles=d,e.each(o||d,function(r,a){var u=e.extend({},i);return u.files=o?a:[a],u.paramName=n[r],s._initResponseObject(u),s._initProgressObject(u),s._addConvenienceMethods(t,u),l=s._trigger("add",e.Event("add",{delegatedEvent:t}),u)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,r=this,o=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},s=function(e){r._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(a)},l=function(){n.readEntries(function(e){e.length?(u=u.concat(e),l()):s(u)},a)},u=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},a):t.isDirectory?(n=t.createReader(),l()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(r){n.files=r,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,r={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)!==!1&&i._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=e(this.element[0].cloneNode(!1)),r=n.data();n.remove(),e.each(r,function(e,r){var o="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n.attr(o)&&(t._isRegExpOption(e,r)&&(r=t._getRegExp(r)),i[e]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,r=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void o.reject();t.files=e,i=r._onSend(null,t),i.then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),/*
 * Cloudinary's jQuery library - v1.0.24
 * Copyright Cloudinary
 * see https://github.com/cloudinary/cloudinary_js
 */
function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","jquery.ui.widget","jquery.iframe-transport","jquery.fileupload"],e);else{var t=window.jQuery;e(t),t(function(){void 0!==t.fn.cloudinary_fileupload&&t("input.cloudinary-fileupload[type=file]").cloudinary_fileupload()})}}(function(e){"use strict";function t(e){if(null===e||"undefined"==typeof e)return"";var t,i,n=e+"",r="",o=0;t=i=0,o=n.length;for(var a=0;o>a;a++){var s=n.charCodeAt(a),l=null;128>s?i++:l=s>127&&2048>s?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==l&&(i>t&&(r+=n.slice(t,i)),r+=l,t=i=a+1)}return i>t&&(r+=n.slice(t,o)),r}function i(e){e=t(e);var i="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",n=0,r=0,o=0;n=-1^n;for(var a=0,s=e.length;s>a;a++)o=255&(n^e.charCodeAt(a)),r="0x"+i.substr(9*o,8),n=n>>>8^r;return n=-1^n,0>n&&(n+=4294967296),n}function n(e,t,i){var n=e[t];return delete e[t],"undefined"==typeof n?i:n}function r(t){return null===t||"undefined"==typeof t?[]:e.isArray(t)?t:[t]}function o(e){return function(t){return r(t).join(e)}}function a(e){return"undefined"!=typeof e&&(""+e).length>0}function s(t){for(var i=r(t.transformation),n=!0,o=0;o<i.length;o++)n=n&&"string"==typeof i[o];if(n)return[];delete t.transformation;for(var a=[],o=0;o<i.length;o++){var s=i[o];"string"==typeof s?a.push("t_"+s):a.push(d(e.extend({},s)))}return a}function l(e){var t=n(e,"size");if(t){var i=t.split("x");e.width=i[0],e.height=i[1]}}function u(e){var t=e.width,i=e.height,n=e.overlay||e.underlay,r=e.crop,o=!n&&!e.angle&&"fit"!=r&&"limit"!=r&&"lfill"!=r;o&&(t&&!e.html_width&&"auto"!==t&&parseFloat(t)>=1&&(e.html_width=t),i&&!e.html_height&&parseFloat(i)>=1&&(e.html_height=i)),r||n||(delete e.width,delete e.height)}function d(e){var t=s(e);if(l(e),u(e),void 0!==e.offset){var i=p(e.offset);delete e.offset,null!==i&&(e.start_offset=i[0],e.end_offset=i[1])}var r=[];for(var o in S){var d=n(e,o);a(d)&&(P[o]&&(d=P[o](d)),a(d)&&r.push(S[o]+"_"+d))}r.sort();var c=n(e,"raw_transformation");a(c)&&r.push(c);var f=r.join(",");return a(f)&&t.push(f),t.join("/")}function p(e){var t;switch(e.constructor){case String:var i="("+R+")..("+R+")";e.match(i)&&(t=e.split(".."));break;case Array:t=e;break;default:t=[null,null]}return t}function c(e){var t=String(e).match(new RegExp("^"+R+"$"));if(t){var i=a(t[5])?"p":"";e=(t[1]||t[4])+i}return e}function f(e){if(!e.match(/^https?:\//)){var t=document.location.protocol+"//"+document.location.host;"?"==e[0]?t+=document.location.pathname:"/"!=e[0]&&(t+=document.location.pathname.replace(/\/[^\/]*$/,"/")),e=t+e}return e}function h(e,t,n,r,o,a,s,l,u){if(t.match(/^\//)&&!s)return"/res"+t;var d=s?"https://":"file:"===window.location.protocol?"file://":"http://";d=u?u+"//":d;var p=!n;if(s)l&&l!=E||(l=n?t+"-res.cloudinary.com":w),p=p||l==w,null==o&&p&&(o=r),o&&(l=l.replace("res.cloudinary.com","res-"+(i(e)%5+1)+".cloudinary.com")),d+=l;else if(a){var c=r?"a"+(i(e)%5+1)+".":"";d+=c+a}else d+=n?t+"-res":"res",d+=r?"-"+(i(e)%5+1):"",d+=".cloudinary.com";return p&&(d+="/"+t),d}function g(e,t,i,n,r){var o=e+"/"+t;if(i)if("image/upload"==o)o="images";else{if("raw/upload"!=o)throw"URL Suffix only supported for image/upload and raw/upload";o="files"}if(n){if("image/upload"!=o&&"images"!=o)throw"Root path only supported for image/upload";o=""}return r&&"image/upload"==o&&(o="iu"),o}function m(t,i){i=i||{};var r=n(i,"type","upload");"fetch"==r&&(i.fetch_format=i.fetch_format||n(i,"format"));var o=d(i),s=n(i,"resource_type","image"),l=n(i,"version"),u=n(i,"format"),p=n(i,"cloud_name",e.cloudinary.config().cloud_name);if(!p)throw"Unknown cloud_name";var c=n(i,"private_cdn",e.cloudinary.config().private_cdn),m=n(i,"secure_distribution",e.cloudinary.config().secure_distribution),_=n(i,"cname",e.cloudinary.config().cname),v=n(i,"cdn_subdomain",e.cloudinary.config().cdn_subdomain),y=n(i,"secure_cdn_subdomain",e.cloudinary.config().secure_cdn_subdomain),D=n(i,"shorten",e.cloudinary.config().shorten),b=n(i,"secure","https:"==window.location.protocol),B=n(i,"protocol",e.cloudinary.config().protocol),F=n(i,"trust_public_id"),A=n(i,"url_suffix"),E=n(i,"use_root_path",e.cloudinary.config().use_root_path);if(A&&!c)throw"URL Suffix only supported in private CDN";if("fetch"==r&&(t=f(t)),t.search("/")>=0&&!t.match(/^v[0-9]+/)&&!t.match(/^https?:\//)&&!a(l)&&(l=1),t.match(/^https?:/)){if("upload"==r||"asset"==r)return t;t=encodeURIComponent(t).replace(/%3A/g,":").replace(/%2F/g,"/")}else{if(t=encodeURIComponent(decodeURIComponent(t)).replace(/%3A/g,":").replace(/%2F/g,"/"),A){if(A.match(/[\.\/]/))throw"url_suffix should not include . or /";t=t+"/"+A}u&&(F||(t=t.replace(/\.(jpg|png|gif|webp)$/,"")),t=t+"."+u)}var C=g(s,r,A,E,D),w=h(t,p,c,v,y,_,b,m,B),x=[w,C,o,l?"v"+l:"",t].join("/").replace(/([^:])\/+/g,"$1/");return x}function _(e){return 10*Math.ceil(e/10)}function v(t,i){e.cloudinary.config("dpr")&&!i.dpr&&(i.dpr=e.cloudinary.config("dpr"));var r=m(t,i),o=n(i,"html_width"),a=n(i,"html_height");return o&&(i.width=o),a&&(i.height=a),r}function y(t,i,n){var r=i[t]||e.cloudinary.config(t);return"undefined"==typeof r&&(r=n),r}function D(e,t){for(var i=e.length-2;i>=0&&e[i]>=t;)i--;return e[i+1]}function b(e){switch(typeof e){case"object":var t="";return void 0!==e.codec&&(t=e.codec,void 0!==e.profile&&(t+=":"+e.profile,void 0!==e.level&&(t+=":"+e.level))),t;case"string":return e;default:return null}}function B(e,t){return t?t===!0?e:e+'="'+t+'"':void 0}function F(t){var i=e.map(t,function(e,t){return B(t,e)});return i.sort(),i.filter(function(e){return e}).join(" ")}var A="d3jpl91pxevbkh.cloudfront.net",E="cloudinary-a.akamaihd.net",C="res.cloudinary.com",w=C,x={format:"jpg",resource_type:"video"},j=["webm","mp4","ogv"],S={angle:"a",audio_codec:"ac",audio_frequency:"af",background:"b",bit_rate:"br",border:"bo",color:"co",color_space:"cs",crop:"c",default_image:"d",delay:"dl",density:"dn",duration:"du",dpr:"dpr",effect:"e",end_offset:"eo",fetch_format:"f",flags:"fl",gravity:"g",height:"h",opacity:"o",overlay:"l",page:"pg",prefix:"p",quality:"q",radius:"r",start_offset:"so",transformation:"t",underlay:"u",video_codec:"vc",video_sampling:"vs",width:"w",x:"x",y:"y",zoom:"z"},P={angle:function(e){return r(e).join(".")},background:function(e){return e.replace(/^#/,"rgb:")},border:function(t){if(e.isPlainObject(t)){var i=""+(t.width||2),n=(t.color||"black").replace(/^#/,"rgb:");t=i+"px_solid_"+n}return t},color:function(e){return e.replace(/^#/,"rgb:")},dpr:function(e){return e=e.toString(),"auto"===e?"1.0":e.match(/^\d+$/)?e+".0":e},effect:o(":"),flags:o("."),transformation:o("."),video_codec:b,start_offset:c,end_offset:c,duration:c},I="([0-9]*)\\.([0-9]+)|([0-9]+)",R="("+I+")([%pP])?",T=null,O=null,U=!1,N={};e.cloudinary={CF_SHARED_CDN:A,OLD_AKAMAI_SHARED_CDN:E,AKAMAI_SHARED_CDN:C,SHARED_CDN:w,config:function(t,i){if(T||(T={},e('meta[name^="cloudinary_"]').each(function(){T[e(this).attr("name").replace("cloudinary_","")]=e(this).attr("content")})),"undefined"!=typeof i)T[t]=i;else{if("string"==typeof t)return T[t];t&&(T=t)}return T},url:function(t,i){return i=e.extend({},i),m(t,i)},video_url:function(t,i){return i=e.extend({resource_type:"video"},i),m(t,i)},video_thumbnail_url:function(t,i){return i=e.extend({},x,i),m(t,i)},url_internal:m,transformation_string:function(t){return t=e.extend({},t),d(t)},image:function(t,i){i=e.extend({},i);var n=v(t,i),r=e("<img/>").data("src-cache",n).attr(i).cloudinary_update(i);return r},video_thumbnail:function(t,i){i=e.extend({},x,i),image(t,i)},facebook_profile_image:function(t,i){return e.cloudinary.image(t,e.extend({type:"facebook"},i))},twitter_profile_image:function(t,i){return e.cloudinary.image(t,e.extend({type:"twitter"},i))},twitter_name_profile_image:function(t,i){return e.cloudinary.image(t,e.extend({type:"twitter_name"},i))},gravatar_image:function(t,i){return e.cloudinary.image(t,e.extend({type:"gravatar"},i))},fetch_image:function(t,i){return e.cloudinary.image(t,e.extend({type:"fetch"},i))},video:function(t,i){i=i||{},t=t.replace(/\.(mp4|ogv|webm)$/,"");var o=n(i,"source_types",[]),a=n(i,"source_transformation",{}),s=n(i,"fallback_content","");0==o.length&&(o=j);var l=e.extend(!0,{},i);l.hasOwnProperty("poster")?e.isPlainObject(l.poster)&&(l.poster.hasOwnProperty("public_id")?l.poster=m(l.poster.public_id,l.poster):l.poster=m(t,e.extend({},x,l.poster))):l.poster=m(t,e.extend({},x,i)),l.poster||delete l.poster;var u="<video ";l.hasOwnProperty("resource_type")||(l.resource_type="video");var d=e.isArray(o)&&o.length>1,p=t;d||(p=p+"."+r(o)[0]);var c=m(p,l);if(d||(l.src=c),l.hasOwnProperty("html_width")&&(l.width=n(l,"html_width")),l.hasOwnProperty("html_height")&&(l.height=n(l,"html_height")),u=u+F(l)+">",d)for(var f=0;f<o.length;f++){var h=o[f],g=a[h]||{};c=m(p+"."+h,e.extend(!0,{resource_type:"video"},i,g));var _="ogv"==h?"ogg":h,v="video/"+_;u=u+"<source "+F({src:c,type:v})+">"}return u+=s,u+="</video>"},sprite_css:function(t,i){return i=e.extend({type:"sprite"},i),t.match(/.css$/)||(i.format="css"),e.cloudinary.url(t,i)},responsive:function(t){O=e.extend(O||{},t),e("img.cld-responsive, img.cld-hidpi").cloudinary_update(O);var i=y("responsive_resize",O,!0);if(i&&!U){O.resizing=U=!0;var n=null;e(window).on("resize",function(){function t(){n&&(clearTimeout(n),n=null)}function i(){e("img.cld-responsive").cloudinary_update(O)}function r(){t(),setTimeout(function(){t(),i()},o)}var o=y("responsive_debounce",O,100);o?r():i()})}},calc_stoppoint:function(t,i){var n=e(t).data("stoppoints")||e.cloudinary.config().stoppoints||_;return"function"==typeof n?n(i):("string"==typeof n&&(n=e.map(n.split(","),function(e){return parseInt(e)})),D(n,i))},device_pixel_ratio:function(){var t=window.devicePixelRatio||1,i=N[t];if(!i){var n=D(e.cloudinary.supported_dpr_values,t);i=n.toString(),i.match(/^\d+$/)&&(i+=".0"),N[t]=i}return i},supported_dpr_values:[.75,1,1.3,1.5,2,3]},e.fn.cloudinary=function(t){return this.filter("img").each(function(){var i=e.extend({width:e(this).attr("width"),height:e(this).attr("height"),src:e(this).attr("src")},e(this).data(),t),r=n(i,"source",n(i,"src")),o=v(r,i);e(this).data("src-cache",o).attr({width:i.width,height:i.height})}).cloudinary_update(t),this},e.fn.cloudinary_update=function(t){t=t||{};var i=y("responsive_use_stoppoints",t,"resize"),n=i===!1||"resize"==i&&!t.resizing;return this.filter("img").each(function(){t.responsive&&e(this).addClass("cld-responsive");var i={},r=e(this).data("src-cache")||e(this).data("src");if(r){var o=e(this).hasClass("cld-responsive")&&r.match(/\bw_auto\b/);if(o){var a,s,l=e(this).parents(),u=l.length,d=0;for(s=0;u>s&&(a=l[s],!(d=e(a).width()));s+=1);if(0==d)return;var p=n?d:e.cloudinary.calc_stoppoint(this,d),c=e(this).data("width")||0;p>c?e(this).data("width",p):p=c,r=r.replace(/\bw_auto\b/g,"w_"+p),i.width=null,t.responsive_preserve_height||(i.height=null)}i.src=r.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+e.cloudinary.device_pixel_ratio()),e(this).attr(i)}}),this};var H=null;e.fn.webpify=function(t,i){var n=this;if(t=t||{},i=i||t,!H){H=e.Deferred();var r=new Image;r.onerror=H.reject,r.onload=H.resolve,r.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA"}return e(function(){H.done(function(){e(n).cloudinary(e.extend({},i,{format:"webp"}))}).fail(function(){e(n).cloudinary(t)})}),this},e.fn.fetchify=function(t){return this.cloudinary(e.extend(t,{type:"fetch"}))},e.fn.fileupload&&(e.cloudinary.delete_by_token=function(t,i){i=i||{};var n=i.url;if(!n){var r=i.cloud_name||e.cloudinary.config().cloud_name;n="https://api.cloudinary.com/v1_1/"+r+"/delete_by_token"}var o=e.support.xhrFileUpload?"json":"iframe json";return e.ajax({url:n,method:"POST",data:{token:t},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:o})},e.fn.cloudinary_fileupload=function(t){var i=!this.data("blueimpFileupload");if(i&&(t=e.extend({maxFileSize:2e7,dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"}},t)),this.fileupload(t),i&&(this.bind("fileuploaddone",function(t,i){if(!i.result.error){if(i.result.path=["v",i.result.version,"/",i.result.public_id,i.result.format?"."+i.result.format:""].join(""),i.cloudinaryField&&i.form.length>0){var n=[i.result.resource_type,i.result.type,i.result.path].join("/")+"#"+i.result.signature,r=e(t.target).prop("multiple"),o=function(){e("<input/>").attr({type:"hidden",name:i.cloudinaryField}).val(n).appendTo(i.form)};if(r)o();else{var a=e(i.form).find('input[name="'+i.cloudinaryField+'"]');a.length>0?a.val(n):o()}}e(t.target).trigger("cloudinarydone",i)}}),this.bind("fileuploadsend",function(e,t){t.headers["X-Unique-Upload-Id"]=(1e10*Math.random()).toString(16)}),this.bind("fileuploadstart",function(t){e(t.target).trigger("cloudinarystart")}),this.bind("fileuploadstop",function(t){e(t.target).trigger("cloudinarystop")}),this.bind("fileuploadprogress",function(t,i){e(t.target).trigger("cloudinaryprogress",i)}),this.bind("fileuploadprogressall",function(t,i){e(t.target).trigger("cloudinaryprogressall",i)}),this.bind("fileuploadfail",function(t,i){e(t.target).trigger("cloudinaryfail",i)}),this.bind("fileuploadalways",function(t,i){e(t.target).trigger("cloudinaryalways",i)}),!this.fileupload("option").url)){var n=t.cloud_name||e.cloudinary.config().cloud_name,r=t.resource_type||"auto",o=t.type||"upload",a="https://api.cloudinary.com/v1_1/"+n+"/"+r+"/"+o;this.fileupload("option","url",a)}return this},e.fn.cloudinary_upload_url=function(e){this.fileupload("option","formData").file=e,this.fileupload("add",{files:[e]}),delete this.fileupload("option","formData").file},e.fn.unsigned_cloudinary_upload=function(t,i,n){n=n||{},i=e.extend({},i)||{};for(var r=["cloud_name","resource_type","type"],o=0;o<r.length;o++){var a=r[o];i[a]&&(n[a]=i[a],delete i[a])}for(var s in i){var l=i[s];e.isPlainObject(l)?i[s]=e.map(l,function(e,t){return t+"="+e}).join("|"):e.isArray(l)&&(l.length>0&&e.isArray(l[0])?i[s]=e.map(l,function(e){return e.join(",")}).join("|"):i[s]=l.join(","))}i.callback||(i.callback="/cloudinary_cors.html"),i.upload_preset=t,n.formData=i,n.cloudinary_field&&(n.cloudinaryField=n.cloudinary_field,delete n.cloudinary_field);var u=n.html||{};return u["class"]="cloudinary_fileupload "+(u["class"]||""),n.multiple&&(u.multiple=!0),this.attr(u).cloudinary_fileupload(n),this},e.cloudinary.unsigned_upload_tag=function(t,i,n){return e("<input/>").attr({type:"file",name:"file"}).unsigned_cloudinary_upload(t,i,n)})});