!function(o){var e=0,t=0,a=function(){return t++,"materialize-lean-overlay-"+t};o.fn.extend({openModal:function(t){o("body").css("overflow","hidden");var i={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%"},n=a(),c=o(this),s=o('<div class="lean-overlay"></div>'),d=++e;s.attr("id",n).css("z-index",1e3+2*d),c.data("overlay-id",n).css("z-index",1e3+2*d+1),o("body").append(s),t=o.extend(i,t),t.dismissible&&(s.click(function(){c.closeModal(t)}),o(document).on("keyup.leanModal"+n,function(o){27===o.keyCode&&c.closeModal(t)})),c.find(".modal-close").on("click.close",function(o){c.closeModal(t)}),s.css({display:"block",opacity:0}),c.css({display:"block",opacity:0}),s.velocity({opacity:t.opacity},{duration:t.in_duration,queue:!1,ease:"easeOutCubic"}),c.data("associated-overlay",s[0]),c.hasClass("bottom-sheet")?c.velocity({bottom:"0",opacity:1},{duration:t.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof t.ready&&t.ready()}}):(o.Velocity.hook(c,"scaleX",.7),c.css({top:t.starting_top}),c.velocity({top:"10%",opacity:1,scaleX:"1"},{duration:t.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof t.ready&&t.ready()}}))}}),o.fn.extend({closeModal:function(t){var a={out_duration:250,complete:void 0},i=o(this),n=i.data("overlay-id"),c=o("#"+n);t=o.extend(a,t),o("body").css("overflow",""),i.find(".modal-close").off("click.close"),o(document).off("keyup.leanModal"+n),c.velocity({opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutQuart"}),i.hasClass("bottom-sheet")?i.velocity({bottom:"-100%",opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){c.css({display:"none"}),"function"==typeof t.complete&&t.complete(),c.remove(),e--}}):i.velocity({top:t.starting_top,opacity:0,scaleX:.7},{duration:t.out_duration,complete:function(){o(this).css("display","none"),"function"==typeof t.complete&&t.complete(),c.remove(),e--}})}}),o.fn.extend({leanModal:function(e){return this.each(function(){var t={starting_top:"4%"},a=o.extend(t,e);o(this).click(function(e){a.starting_top=(o(this).offset().top-o(window).scrollTop())/1.15;var t=o(this).attr("href")||"#"+o(this).data("target");o(t).openModal(a),e.preventDefault()})})}})}(jQuery);